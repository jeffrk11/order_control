
<div class=" row p-4 m-0 ">
    <div class="container">
        <form>
            <div class=" row m-0 p-0 justify-content-between">
                <!-- pedido codigo -->
                <div class="col-2">
                    <label for="id" class="form-label"><b>Pedido</b></label>
                    <input type="number" class="form-control" id="id_pedido" value="<%= parseInt(pedido.id) %>">
                </div>
                <!-- representante nome -->
                <div class="col-3">
                    <label for="representante" class="form-label"><b>Representante</b></label>
                    <input type="text" class="form-control" id="representante" value="<%= pedido.representante %>">
                </div>
                <!-- cliente nome  -->
                <div class="col-3">
                    <label for="cliente" class="form-label"><b>Cliente</b></label>
                    <input type="text" class="form-control" id="cliente" value="<%= pedido.cliente %>" >
                </div>
                <!-- data entrega  -->
                <div class="col-3">
                    <label for="data" class="form-label"><b>Data</b></label>
                    <input type="text" class="form-control" id="txt_entrega" value="<%= pedido.data_entrega %>">
                </div>
            </div>
            <!-- botoes -->
            <div class="row m-2 p-2 justify-content-end" style="position: relative;" >
                <!-- salvar pedido -->
                <button type="button" onclick="save_pedido()" data-bs-toggle="modal" data-bs-target="#modal_mensagem" id="btn_salvar_pedido"class="m-2 w-auto btn btn-outline-success"><b>Salvar</b></button>
                <button id="btn_cancelar"  onclick="pop()" type="button" class="m-2 w-auto btn btn-outline-danger"><b>Cancelar</b></button>
            </div>
            <!-- adicionar Ref -->
            <div class="row m-2 p-2 justify-content-end">
                <div class="input-group w-auto">
                    <input id="txt_add_ref" type="number" class="form-control" placeholder="Referência">
                    <button id="btn_add_ref" class="btn btn-outline-success" type="button" onclick="table_add_ref()"><b>Adicionar</b></button>
                </div>
            </div>
            <!-- pedidos lista  -->
            <div class="row m-0 p-2">
                <table class="table table-hover">
                    <thead>
                        <tr>
                            <th scope="col">Ref.</th>
                            <th scope="col">Descrição</th>
                            <th scope="col">Total</th>
                            <th scope="col">RN</th>
                            <th scope="col">P</th>
                            <th scope="col">M</th>
                            <th scope="col">G</th>
                            <th scope="col">1</th>
                            <th scope="col">2</th>
                            <th scope="col">3</th>
                            <th scope="col">Ação</th>
                        </tr>
                    </thead>
                    <tbody id="tb">
                        <!-- dinamicamente pegando do back, se for ediçao de pedido -->
                    </tbody>
                </table>
            </div>
        </form>
    </div>
</div>

<!-- Modal -->
<div class="modal fade" id="modal_line" tabindex="-1" aria-labelledby="modal_lineLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
        <div class="modal-body" id="modal_body">
            
        </div>
        <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cancelar</button>
        <button type="button" id="btn_modal_save" data-bs-dismiss="modal" class="btn btn-primary">Salvar</button>
        </div>
    </div>
    </div>
</div>
<!-- script q faz chamada no back -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.26.1/axios.min.js" integrity="sha512-bPh3uwgU5qEMipS/VOmRqynnMXGGSRv+72H/N260MQeXZIK4PG48401Bsby9Nq5P5fz7hy5UGNmC/W1Z51h2GQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script type="text/javascript" src="/pedidos/script_pedidos.js"></script>
<script type="text/javascript">
    //variaveis passadas pelo back, dessa forma para o ejs renderizar
    let pedido = JSON.parse('<%- JSON.stringify(pedido) %>')
    let referencias = JSON.parse('<%- JSON.stringify(referencias) %>')
</script>